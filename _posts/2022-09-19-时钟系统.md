---
layout: post
date: 2022-09-19
tags: 嵌入式基础  
---

# 时钟系统

​		从时钟频率来分可以分为高速时钟源和低速时钟源， HSI， HSE 以及 PLL 是高速时钟， 为芯片的内核和主要外设提供时钟；LSI 和 LSE 是低速时钟，为芯片的RTC和看门狗提供时钟。

## 一、时钟源

### 1.外部高速时钟（HSE）

​		高速外部时钟，一般接石英/陶瓷谐振器及其配套电路构成的时钟电路，其频率范围为 4MHz~16MHz。也可用旁路方式，接外部时钟源外部时钟信号(50%占空比的方波、正弦波或三角波)，此时必须连到OSC_IN引脚，同时保证OSC_OUT引脚悬空。

### 2.外部低速时钟(LSE)

​		低速外部时钟，接频率为 32.768kHz 的石英晶体。其经过16分频即可得到准确的1 Hz的秒时钟信号，提供给实时时钟RTC。

### 3.内部高速时钟(HSI)

​		高速内部时钟， RC 振荡器， 频率为 8MHz。系统启动时，硬件默认使用改时钟，硬件启动完成后，一般在初始化程序中会将时钟源配置为更为稳定的 HSE。

### 4.内部低速时钟(LSI)

​		低速内部时钟， RC 振荡器，频率为 40kHz。 独立看门狗的时钟源只能是 LSI，同时 LSI 还可以作为 RTC 的时钟源。

## 二、PLL锁相环

​		内部PLL可以用来倍频HSI RC的输出时钟或HSE晶体输出时钟。PLL 为锁相环倍频输出，其时钟输入源可选择为 HSI/2、 HSE 或者 HSE/2。倍频可选择为2~16 倍，但是其输出频率最大不得超过 72MHz。 

​		如果需要在应用中使用USB接口， PLL必须被设置为输出48或72MHZ时钟，经过1分频或者1.5分频就可提供48MHz的USBCLK时钟。  